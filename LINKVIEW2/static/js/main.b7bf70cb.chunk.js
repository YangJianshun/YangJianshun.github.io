(this["webpackJsonp@linkview/linkview-gui"]=this["webpackJsonp@linkview/linkview-gui"]||[]).push([[0],{104:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=r(n(274));t.default=function(e,t,n){var r=0;return new Promise((function(i,s){a.default.eachLine(e,(function(e){return!(!n||!n(e))||t(e,r+=1)}),(function(t){t&&s(t),i(e)}))}))}},105:function(e,t,n){"use strict";var r=n(34),a=n(38),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.parseParamAxisPos=t.parseParamStyle=t.parseParamAlign=t.parseParamLabelPos=t.parseParamAxisUnit=t.parseBases=t.parseParamWithLimit=t.parseParamInput=t.parseParamMultipleFile=t.parseParamSingleFile=t.parseParamFiles=t.parseParamFloat=t.parseParamInt=t.toArray=void 0;var s=i(n(56));function o(e){return e instanceof Array?e:e.length&&"string"!==typeof e?Array.from(e):[e]}function l(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0;if(e=o(e),t)for(var i=0,l=e.length;i<l;i++){var c,u=e[i],f=u.split(",");(c=e).splice.apply(c,[i,1].concat(a(f))),i+=f.length-1}var h,p=r(e);try{for(p.s();!(h=p.n()).done;){var d=h.value;if(!s.default.existsSync(d))throw new Error("".concat(n,", ").concat(d," not exist!"))}}catch(g){p.e(g)}finally{p.f()}return e}function c(e){return function(t,n){if(t=t.toLowerCase(),!e.includes(t))throw new Error("Illegal argument of option '".concat(n,"', Expected ").concat(e.join(" | "),", but received '").concat(t,"'"));return t}}function u(e){var t={m:1e6,mb:1e6,mbp:1e6,k:1e3,kb:1e3,kbp:1e3,bp:1};e=e.trim().toLowerCase();var n=Number(e);for(var r in t)if(e.endsWith(r)){e=e.replace(r,""),n=Number(e)*t[r];break}return n}t.toArray=o,t.parseParamInt=function(e,t){var n=parseInt(String(Number(e)));if(isNaN(n))throw new Error("Illegal argument of option '".concat(t,"', ").concat(e," is not an integer"));return n},t.parseParamFloat=function(e,t){var n=Number(e);if(isNaN(n))throw new Error("Illegal argument of option '".concat(t,"', ").concat(e," is not a number"));return n},t.parseParamFiles=l,t.parseParamSingleFile=function(e,t){return l(e,!1,"Illegal argument of option '".concat(t,"'"))[0]},t.parseParamMultipleFile=function(e,t){return l(e,!0,"Illegal argument of option '".concat(t,"'"))},t.parseParamInput=function(e){return l(e,!0,"Illegal argument")},t.parseParamWithLimit=c,t.parseBases=u,t.parseParamAxisUnit=function(e,t){var n="auto"===(e=(e=e.toString()).trim().toLowerCase())?e:u(e);if("auto"!==n&&isNaN(n))throw new Error("Illegal argument of option '".concat(t,"', '").concat(e,"' cannot be resolved to number of bases!"));return n},t.parseParamLabelPos=c(["left","center","right"]),t.parseParamAlign=c(["left","center","right"]),t.parseParamStyle=c(["classic","simple"]),t.parseParamAxisPos=c(["top","bottom"])},123:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.autoLayoutCreater=t.alignCreater=t.paramsCreater=t.svgCreater=t.layoutCreater=void 0;var s=n(259);Object.defineProperty(t,"layoutCreater",{enumerable:!0,get:function(){return i(s).default}});var o=n(268);Object.defineProperty(t,"svgCreater",{enumerable:!0,get:function(){return i(o).default}});var l=n(136);Object.defineProperty(t,"paramsCreater",{enumerable:!0,get:function(){return i(l).default}}),a(n(136),t);var c=n(304);Object.defineProperty(t,"alignCreater",{enumerable:!0,get:function(){return i(c).default}});var u=n(305);Object.defineProperty(t,"autoLayoutCreater",{enumerable:!0,get:function(){return i(u).default}})},127:function(e,t,n){"use strict";var r=n(44),a=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return i(t,e),t},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function s(e){try{l(r.next(e))}catch(t){i(t)}}function o(e){try{l(r.throw(e))}catch(t){i(t)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}l((r=r.apply(e,t||[])).next())}))},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.alignParserFromContent=void 0;var c=s(n(273)),u=s(n(133)),f=l(n(293)),h=n(78);t.alignParserFromContent=function(e,t){var n=(0,c.checkTypeFromContent)(e),r=n.alignType,a=n.parserOpt,i=(0,u.parserCreater)(a,"input alignments"),s=(0,u.filterCreater)(a?a.filters:null),o=t?(0,f.default)(t):null,l=(0,u.parseAlignFromContent)(e,i,s,o);return{alignType:r,alignments:l.alignments,alignmentsByCtgs:l.alignmentsByCtgs,lenInfo:l.lenInfo}},t.default=function(e,t){return o(void 0,void 0,void 0,r.mark((function n(){var a,i,s,o,l,p,d,g,b,m;return r.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,c.default)(e);case 2:return a=n.sent,i=a.alignType,s=a.parserOpt,o=(0,h.withErrorConsole)((0,u.parserCreater)(s,e)),l=(0,u.filterCreater)(s?s.filters:null),p=t?(0,f.default)(t):null,n.next=10,(0,u.default)(e,o,l,p);case 10:return d=n.sent,g=d.alignments,b=d.alignmentsByCtgs,m=d.lenInfo,n.abrupt("return",{alignType:i,alignments:g,alignmentsByCtgs:b,lenInfo:m});case 15:case"end":return n.stop()}}),n)})))}},128:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.checkLine=void 0;var a=r(n(129)),i=n(283),s=n(130),o=n(131),l=n(66);function c(e,t){var n=t.split,r=t.columns,a=t.columnCount,l=t.startsWith,u=t.endsWith,f=t.content,h=t.exclude,p=[];if(n){var d=(e=e.trim()).split(n);if(a&&(a instanceof Array?p.push(a.includes(d.length)):p.push(d.length===a)),r)for(var g in r){var b=d[g],m=r[g];i.strandFlags[m]&&p.push(i.strandFlags[m].includes(b)),i.numberColumnsSet.has(m)&&p.push((0,s.isNumber)(b))}}if(l&&p.push(e.startsWith(l)),u&&p.push(e.endsWith(u)),f&&Array.from(f).forEach((function(t){p.push(e.indexOf(t)>=0)})),h){var v=h;p.push(!c(e,v))}return(0,o.allTrue)(p)}t.checkLine=c,t.default=function(e){var t=function(t){if(t===l.AlignType.UNKNOWN)return"continue";var n=a.default[t],r=[];return n.all&&e.forEach((function(e){r.push(c(e,n.all))})),n.include&&n.include.forEach((function(t){var n=e.findIndex((function(e){return c(e,t)}))>0;r.push(n)})),(0,o.allTrue)(r)?{v:t}:void 0};for(var n in a.default){var r=t(n);if("continue"!==r&&"object"===typeof r)return r.v}return l.AlignType.UNKNOWN}},129:function(e,t,n){"use strict";var r,a,i=n(98);Object.defineProperty(t,"__esModule",{value:!0});var s=n(66),o=(i(a={},s.AlignType.STANDARD,{all:{split:/\s+/,columnCount:[6,7],columns:["ctg1","start1","end1","ctg2","start2","end2","color:opacity"]}}),i(a,s.AlignType.BLAST,{all:{split:"\t",columnCount:12,columns:["ctg1","ctg2","identity","alignLen","otherNumber","otherNumber","start1","end1","start2","end2","evalue","bitScore"]}}),i(a,s.AlignType.MINIMAP,{all:{split:"\t",columns:["ctg1","len1","start1","end1","minimapStrand","ctg2","len2","start2","end2","alignLen"]}}),i(a,s.AlignType.NUCMER,{include:[{startsWith:"NUCMER"},{content:["[S1]","[TAGS]","|"]}]}),i(a,s.AlignType.NUCMER_T,{include:[{startsWith:"NUCMER"},{content:["[S1]","[TAGS]"],exclude:{content:"|"}}]}),i(a,s.AlignType.NUCMER_B,{all:{split:"\t",columnCount:21,columns:(r={},i(r,0,"ctg2"),i(r,2,"len2"),i(r,3,"NUCMER"),i(r,5,"ctg1"),i(r,6,"start2"),i(r,7,"end2"),i(r,8,"start1"),i(r,9,"end1"),i(r,10,"identity"),i(r,11,"identity"),i(r,12,"alignLen"),i(r,17,"nucmerStrand"),i(r,18,"len1"),r)}}),i(a,s.AlignType.UNKNOWN,{}),a);t.default=o},130:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isNumber=void 0;t.isNumber=function(e){return!isNaN(Number(e))}},131:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.average=t.allTrue=void 0;t.allTrue=function(e){return-1===e.findIndex((function(e){return!Boolean(e)}))};t.average=function(e){return e.length>0?e.reduce((function(e,t){return e+t}))/e.length:NaN}},133:function(e,t,n){"use strict";var r=n(24),a=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||a(t,e,n)},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.parseAlignFromContent=t.filterCreater=t.parserCreater=void 0;var o=s(n(104)),l=n(134),c=n(130),u=n(131),f=n(128),h=n(78);t.parserCreater=function(e,t){return function(n){if(n=n.trim(),!e)return null;var a=e.split,i=e.columns,s=n.split(a),o={ctg1:"",start1:0,end1:0,ctg2:"",start2:0,end2:0,alignLen:0,color:l.DEFAULT_COLOR_FLAG,opacity:l.DEFAULT_OPACITY_FLAG},f=[],p=!1;for(var d in e.columns){var g=i[d],b=s[d];if(["ctg1","ctg2"].includes(g))o[g]=b;else if(["start1","end1","start2","end2","identity","evalue","bitScore","len1","len2"].includes(g)){if(!(0,c.isNumber)(b)){var m=(0,h.errorPos)(n,s,d);throw new Error("".concat(g," should be a number, but get '").concat(b,"' in '").concat(t,"': \n").concat(m," \n"))}o[g]=Number(b)}else if("alignLen"===g)(0,c.isNumber)(b)&&f.push(Number(b));else if("color:opacity"===g&&b){var v=b.split(":"),_=r(v,2),y=_[0],x=_[1];o.color=y,o.opacity=(0,c.isNumber)(x)?Number(x):1}else"minimapStrand"===g&&"-"===b&&(p=!0)}if(p){var j=o.start1,O=[o.end1,j];o.start1=O[0],o.end1=O[1]}if(f.length>0&&(o.alignLen=(0,u.average)(f)),0===o.alignLen){var C=o.start1,w=o.end1,P=o.start2,N=o.end2;o.alignLen=(Math.abs(C-w)+1+Math.abs(P-N)+1)/2}return o}};t.filterCreater=function(e){return function(t){var n=""===(t=t.trim())||t.startsWith("#");return e&&(n=n||e.findIndex((function(e){return(0,f.checkLine)(t,e)}))>=0),n}};t.parseAlignFromContent=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=[],i={},s={},o=e.trim().split("\n");return o.forEach((function(e){if(!n(e)){var o=t(e);if(o){var l=o.len1,c=o.len2,u=o.ctg1,f=o.ctg2;l&&(s[u]=l),c&&(s[f]=c),delete o.len1,delete o.len2,u in i||(i[u]={}),f in i[u]||(i[u][f]=[]),f in i||(i[f]={}),u in i[f]||(i[f][u]=[]),o&&(!r||!r(o))&&a.push(o)&&i[u][f].push(o)&&i[f][u].push(o)}}})),{alignments:a,alignmentsByCtgs:i,lenInfo:s}},t.default=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=[],i={},s={};return(0,o.default)(e,(function(e){var n=t(e);if(n){var o=n.len1,l=n.len2,c=n.ctg1,u=n.ctg2;o&&(s[c]=o),l&&(s[u]=l),delete n.len1,delete n.len2,c in i||(i[c]={}),u in i[c]||(i[c][u]=[]),u in i||(i[u]={}),c in i[u]||(i[u][c]=[]),n&&(!r||!r(n))&&a.push(n)&&i[c][u].push(n)&&i[u][c].push(n)}return!0}),n).then((function(){return{alignments:a,alignmentsByCtgs:i,lenInfo:s}}))},i(n(134),t)},134:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_OPACITY_FLAG=t.DEFAULT_COLOR_FLAG=void 0,t.DEFAULT_COLOR_FLAG="DEFAULT_COLOR",t.DEFAULT_OPACITY_FLAG=-1},135:function(e,t,n){"use strict";var r=n(34),a=n(38),i=n(24);Object.defineProperty(t,"__esModule",{value:!0}),t.complement=t.intersection=void 0,t.intersection=function(e,t){var n=e.sort((function(e,t){return e-t})),r=i(n,2),s=r[0],o=r[1],l=t.sort((function(e,t){return e-t})),c=i(l,2),u=c[0],f=c[1];return o<u||f<s?[]:[].concat(a(e),a(t)).sort((function(e,t){return e-t})).slice(1,3)},t.complement=function(e,t){var n=i(e,2),a=n[0],s=n[1],o=a,l=a,c=[];(t=t.map((function(e){return e.sort((function(e,t){return e-t}))}))).sort((function(e,t){return e[0]-t[0]}));var u,f=r(t);try{for(f.s();!(u=f.n()).done;){var h=i(u.value,2),p=h[0],d=h[1];if(p>s)break;(o=p)>l&&c.push([l,o-1]),d+1>l&&(l=d+1)}}catch(g){f.e(g)}finally{f.f()}return l<=s&&c.push([l,s]),c}},136:function(e,t,n){"use strict";var r=n(24),a=n(34),i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var l=o(n(56)),c=n(65),u=n(105),f={chro_thickness:"number",no_label:"boolean",label_font_size:"number",label_angle:"number",label_pos:"string",label_x_offset:"number",label_y_offset:"number",chro_axis:"boolean",chro_axis_unit:"string",chro_axis_pos:"string",gap_length:"number",align:"string"};t.default=function(){var e=this,t=[],n=e.parameter,i=e.parameterContent,s={chro_thickness:e.chro_thickness,no_label:e.no_label,label_font_size:e.label_font_size,label_angle:e.label_angle,label_pos:e.label_pos,label_x_offset:e.label_x_offset,label_y_offset:e.label_y_offset,chro_axis:e.chro_axis,chro_axis_pos:e.chro_axis_pos,chro_axis_unit:(0,u.parseParamAxisUnit)(e.chro_axis_unit,"chro_axis_unit"),gap_length:e.gap_length,align:e.align};e.defualtDrawOptionsItem=s,e.getDrawOptionsItem=function(e){return e in t?t[e]:s};var o=n?l.default.readFileSync(n).toString():i,h=n||"PARAMETER";if(!o)return e;for(var p=o.split("\n"),d=0,g=p.length;d<g;d++){var b=p[d];if(""!==b.trim()){var m,v=b.split(/\s+/),_=Object.assign({},s),y=a(v);try{for(y.s();!(m=y.n()).done;){var x=m.value,j=x.split("="),O=r(j,2),C=O[0],w=O[1],P=w;if(C in f){var N=f[C];try{"boolean"===N?(P=Boolean(w),w?["false","f"].includes(w.toLowerCase())&&(P=!1):P=!0):"number"===N?P=(0,u.parseParamFloat)(w,C):"string"===N&&("label_pos"===C?P=(0,u.parseParamLabelPos)(w,C):"align"===C?P=(0,u.parseParamAlign)(w,C):"chro_axis_unit"===C&&(P=(0,u.parseParamAxisUnit)(w,C)))}catch(I){var S=(0,c.errorPos)(b,w,x);throw I.message="".concat(I.message," at ").concat(h," line ").concat(d+1,"\n").concat(S),I}_[C]=P}else{var A=(0,c.errorPos)(b,C,x);(0,c.warn)("Illegal drawoption in '".concat(C,"' ").concat(n," line ").concat(d+1,"\n").concat(A))}}}catch(M){y.e(M)}finally{y.f()}t.push(_)}}return e.drawOptions=t,e},s(n(105),t)},141:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.main=void 0,a(n(123),t),a(n(306),t),a(n(65),t);var s=n(307);Object.defineProperty(t,"main",{enumerable:!0,get:function(){return i(s).default}})},152:function(e,t,n){},166:function(e,t,n){},179:function(e,t,n){},259:function(e,t,n){"use strict";var r=n(24),a=n(34),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=i(n(56)),o=n(65);t.default=function(){var e=this,t=[];e.layout=t;var n=e.karyotype,i=e.karyotypeContent,l=n?s.default.readFileSync(n).toString().trim():i,c=n||"KARYOTYPE";if(!l)return e;for(var u=l.split("\n"),f=0,h=u.length;f<h;f++){var p=u[f].trim(),d=p.split(/\s+/);t.push([]);var g,b=a(d);try{for(b.s();!(g=b.n()).done;){var m=g.value,v=m.startsWith("-"),_=m.endsWith("-"),y=(m=m.replace(/^-*/,"").replace(/-*$/,"")).split(":"),x=r(y,3),j=x[0],O=x[1],C=x[2],w=void 0===O&&void 0===C,P=w?0:Number(O),N=w?0:Number(C);if(isNaN(P)||isNaN(N)){var S=isNaN(P)?O:C,A=(0,o.errorPos)(p,S,m);throw new Error("format error at karyotype file '".concat(c,"' line ").concat(f+1,"\n").concat(A,"\n'").concat(S,"' is not a number!"))}t[f].push({ctg:j,start:P,end:N,leftDash:v,rightDash:_})}}catch(I){b.e(I)}finally{b.f()}}return e}},268:function(e,t,n){"use strict";var r=n(44),a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function s(e){try{l(r.next(e))}catch(t){i(t)}}function o(e){try{l(r.throw(e))}catch(t){i(t)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}l((r=r.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=i(n(269)),o=n(43),l=i(n(48)),c=i(n(270)),u=i(n(271)),f=i(n(272)),h=i(n(300)),p=i(n(301)),d=i(n(302)),g=i(n(303));t.default=function(){var e,t;return a(this,void 0,void 0,r.mark((function n(){var a;return r.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return(a=this).svg_template=[],a.use(c.default),a.use(s.default),a.use(u.default),a.use(f.default),a.use(p.default),n.next=9,a.use(g.default);case 9:a.use(h.default),a.use(d.default),null===(e=a.svg_template)||void 0===e||e.unshift(o.SVG_START),null===(t=a.svg_template)||void 0===t||t.push(o.SVG_END),a.svg=(0,l.default)(a.svg_template,a);case 14:case"end":return n.stop()}}),n,this)})))}},269:function(e,t,n){"use strict";var r=n(38);Object.defineProperty(t,"__esModule",{value:!0});var a=n(65),i=n(43),s=n(48);function o(e,t){var n=e.map((function(e){var t=e.start,n=e.end;return Math.abs(n-t)+1})).reduce((function(e,t){return e+t})),r=e.length-1,a=t.gap_length>=1?t.gap_length:t.gap_length*n,i=a*r;return{len:n,totalLen:n+i,gapLen:a,totalGapLen:i}}t.default=function(){var e=this,t=e.layout,n=e.drawOptions;n&&t.length!==n.length&&(0,a.warn)("".concat(e.karyotype," and ").concat(e.parameter," have different lines\uff01You'd better check it carefully\uff01"));for(var l=e.svg_height,c=function(r){var i=e.getDrawOptionsItem(r);t[r].forEach((function(e){0!==e.start&&0!==e.end||(0,a.warn)("'".concat(e.ctg,"' is missing start and end information and will be ignored\uff01"))})),t[r]=t[r].filter((function(e){return!(0===e.start||0===e.end)}));var s=t[r],o=0;s.length>0?(s.forEach((function(e){e.svgHeight=i.chro_thickness,o<e.svgHeight&&(o=e.svgHeight)})),l-=o):(t.splice(r,1),n&&n.splice(r,1),r--),u=r},u=0;u<t.length;u++)c(u);var f=t.length,h=l/(f+1),p=e.scale?1/e.scale:function(e){for(var t=e.layout,n=0,r=0,a=t.length;r<a;r++){var i=o(t[r],e.getDrawOptionsItem(r)).totalLen;n<i&&(n=i)}return e.svg_content_width/n}(e);e.scale=p;var d=0,g=[],b=[i.SVG_CLIPPATH_START];return t.forEach((function(t,n){var l=Math.max.apply(Math,r(t.map((function(e){return e.svgHeight}))));d+=h,d+=l;var c=e.getDrawOptionsItem(n),u=o(t,c),f=u.gapLen,m=(u.totalGapLen,u.totalLen),v=(u.len,e.svg_width*e.svg_space/2);switch(c.align){default:break;case"center":v+=(e.svg_content_width-m*p)/2;break;case"right":v+=e.svg_content_width-m*p}t.forEach((function(t){var n=t.ctg,r=t.start,o=t.end,l=(t.svgHeight,Math.max(r,o)),u=Math.min(r,o),h={y:d,height:c.chro_thickness,x:v,width:(l-u+1)*p};v+h.width>e.svg_width&&(0,a.warn)("'".concat(n,":").concat(r,":").concat(o,"' is out of the scope of the picture\uff01")),t.leftDash&&g.push((0,s.renderItem)(i.SVG_CTG_DASH,{y:d+c.chro_thickness/2,x1:v-12,x2:v})),t.rightDash&&g.push((0,s.renderItem)(i.SVG_CTG_DASH,{y:d+c.chro_thickness/2,x1:h.width+v,x2:h.width+v+12}));var m=(0,s.renderItem)(i.SVG_CTG,h);g.push(m),b.push(m),v+=h.width+f*p,t.svgProps=h,t.getSvgPos=function(e){return function(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=e.start,i=e.end;a>i&&(r=!r);var s=e.svgProps,o=s.x,l=s.y,c=s.width,u=s.height,f=Math.abs(t-a)+(r?1:0);return(a>i&&t>a||a<i&&t<a)&&(f=-f),[o+c*(f/(Math.abs(i-a)+1)),"top"===n?l:l+u]}}(t)}))})),b.push(i.SVG_CLIPPATH_END),g.push.apply(g,b),e.svg_template||(e.svg_template=[]),e.svg_template.push({content:g}),e}},270:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(43);t.default=function(){var e=this;return e.svg_template||(e.svg_template=[]),e.svg_template.push({content:[]}),e.style in r.styles&&e.svg_template.push({content:r.styles[e.style]}),e}},271:function(e,t,n){"use strict";var r=n(24);Object.defineProperty(t,"__esModule",{value:!0});var a=n(48),i=n(43);t.default=function(){var e=this,t=e.layout,n=[];return t.forEach((function(t,s){var o=e.getDrawOptionsItem(s);o.no_label||t.forEach((function(e){var t="left"===o.label_pos?e.getSvgPos(e.start,"bottom",e.end<e.start):"center"===o.label_pos?e.getSvgPos(e.start+(e.end-e.start)/2,"bottom",e.end<e.start):e.getSvgPos(e.end,"bottom",e.end>e.start),s=r(t,2),l=s[0],c=s[1];c+=o.label_font_size;var u={x:l+=o.label_x_offset,y:c+=o.label_y_offset,label_font_size:o.label_font_size,label_angle:o.label_angle,ctg:e.ctg};n.push((0,a.renderItem)(i.SVG_LABEL,u))}))})),e.svg_template||(e.svg_template=[]),e.svg_template.push({content:n}),e}},272:function(e,t,n){"use strict";var r=n(24);Object.defineProperty(t,"__esModule",{value:!0});var a=n(77),i=n(48),s=n(43);t.default=function(){for(var e=this,t=e.layout,n=e.alignmentsByCtgs,o=[],l=function(l,c){var u=t[l],f=t[l+1];u.forEach((function(t){f.forEach((function(l){var c=t.ctg,u=l.ctg,f=c in n&&u in n[c]?n[c][u]:[];f&&f.forEach((function(n){var u=t.ctg===n.ctg1?t.start:l.start,f=t.ctg===n.ctg1?t.end:l.end,h=t.ctg===n.ctg2?t.start:l.start,p=t.ctg===n.ctg2?t.end:l.end,d=(0,a.calculateSubAlign)(n,u,f,h,p);if(d){var g=d.start1,b=d.end1,m=d.start2,v=d.end2;if(n.ctg1!==c){var _=[m,g];g=_[0],m=_[1];var y=[v,b];b=y[0],v=y[1]}var x=t.getSvgPos(g,"bottom",g===Math.max(g,b)),j=r(x,2),O=j[0],C=j[1],w=l.getSvgPos(m,"top",m===Math.max(m,v)),P=r(w,2),N=P[0],S=P[1],A=l.getSvgPos(v,"top",v===Math.max(m,v)),I=r(A,2),M=I[0],E=I[1],T=t.getSvgPos(b,"bottom",b===Math.max(g,b)),L=r(T,2),k=L[0],G=L[1],V=n.color===a.DEFAULT_COLOR_FLAG?"":"fill: ".concat(n.color,";"),B=n.opacity===a.DEFAULT_OPACITY_FLAG?"":"opacity: ".concat(n.opacity,";"),R={x1:O,y1:C,x2:N,y2:S,x3:M,y3:E,x4:k,y4:G,selfStyle:V||B?'style="'.concat(V," ").concat(B,'"'):""};if(e.bezier){var D=O>N?[1,2,2,1]:[2,1,1,2];Object.assign(R,{bezierX1:O,bezierY1:Math.min(C,S)+Math.abs(C-S)/3*D[0],bezierX2:N,bezierY2:Math.min(C,S)+Math.abs(C-S)/3*D[1],bezierX3:M,bezierY3:Math.min(E,G)+Math.abs(E-G)/3*D[2],bezierX4:k,bezierY4:Math.min(E,G)+Math.abs(E-G)/3*D[3]})}var F=e.bezier?s.SVG_ALIGN_BEZIER:s.SVG_ALIGN;o.push((0,i.renderItem)(F,R))}}))}))}))},c=0,u=t.length;c<u-1;c++)l(c);return e.svg_template||(e.svg_template=[]),e.svg_template.push({content:o}),e}},273:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.checkTypeFromContent=void 0;var a=r(n(56)),i=r(n(104)),s=r(n(128)),o=r(n(284)),l=n(78),c=n(66);t.default=function(e){var t=[];if(!a.default.existsSync(e))throw new Error("".concat(e," does not exist, please check!"));return(0,i.default)(e,(function(e,n){if(t.push(e),n>=5)return!1}),(function(e){return e.startsWith("#")||""===e})).then((function(){var e=(0,s.default)(t);return e===c.AlignType.UNKNOWN&&(0,l.warn)("Unknown input alignment type!"),{alignType:e,parserOpt:(0,o.default)(e,t)}}))},t.checkTypeFromContent=function(e){var t=e.trim().split("\n").filter((function(e){return!(e.startsWith("#")||""===e)})).slice(0,5),n=(0,s.default)(t);if(n===c.AlignType.UNKNOWN)throw new Error("Unknown input alignment type!");return{alignType:n,parserOpt:(0,o.default)(n,t)}}},283:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.numberColumnsSet=t.strandFlags=t.numberColumns=void 0,t.numberColumns=["start1","end1","len1","start2","end2","len2","alignLen","identity","evalue","bitScore","otherNumber"],t.strandFlags={minimapStrand:["+","-"],nucmerStrand:["Plus","Minus"]},t.numberColumnsSet=new Set(t.numberColumns)},284:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=r(n(129)),i=n(66);t.default=function(e,t){switch(e){case i.AlignType.UNKNOWN:return null;case i.AlignType.STANDARD:case i.AlignType.BLAST:case i.AlignType.MINIMAP:case i.AlignType.NUCMER_B:return{split:a.default[e].all.split,columns:a.default[e].all.columns};case i.AlignType.NUCMER:case i.AlignType.NUCMER_T:return function(e){var t=/\s+/,n={split:/\s+\|\s+|\s+/,filters:[{startsWith:"NUCMER",endsWith:"NUCMER"},{startsWith:"/"},{startsWith:"[",endsWith:"]"},{startsWith:"=",endsWith:"="}],columns:[]},r={"[S1]":"start1","[E1]":"end1","[S2]":"start2","[E2]":"end2","[LEN 1]":"alignLen","[LEN 2]":"alignLen","[LEN R]":"len1","[LEN Q]":"len2","[COV R]":"otherNumber","[COV Q]":"otherNumber","[% IDY]":"identity","[TAG1]":"ctg1","[TAG2]":"ctg2"};return e.findIndex((function(e){if((e=e.trim()).startsWith("[")&&e.endsWith("]")){e.includes("|")||(n.split=t);var a=e.match(/\[.+?\]/g),i=a.indexOf("[TAGS]");return i>=0&&a.splice(i,1,"[TAG1]","[TAG2]"),a.forEach((function(e){n.columns.push(r[e])})),!0}return!1})),n}(t);default:return null}}},293:function(e,t,n){"use strict";var r=n(24);Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e){return function(t){var n=t.alignLen,a=t.identity,i=t.evalue,s=t.bitScore,o=t.ctg1,l=t.ctg2,c=e.minAlignmentLength,u=e.minIdentity,f=e.maxEvalue,h=e.minBitScore,p=e.filterCtgPairs;return!!(c&&n<c)||(!!(u&&a&&a<u)||(!!(i&&void 0!==f&&i>f)||(!!(s&&h&&s<h)||!(!p||!function(e,t,n){return e.findIndex((function(e){var a=r(e,2),i=a[0],s=a[1];return i===t&&s===n||i===n&&s===t}))>=0}(p,o,l)))))}}},294:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),a(n(295),t),a(n(66),t),a(n(296),t),a(n(297),t)},295:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},296:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},297:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},298:function(e,t,n){"use strict";var r=n(24);Object.defineProperty(t,"__esModule",{value:!0}),t.calculateSubAlign=void 0;var a=n(135);function i(e,t,n){return n<Math.min(e,t)?e<t?0:1:n>Math.max(e,t)?e<t?1:0:(Math.abs(n-e)+1)/(Math.abs(t-e)+1)}function s(e,t,n){if(0===n)return e;if(1===n)return t;var r=Math.abs(t-e)+1;return Number((e>t?e-(r*n-1):e+(r*n-1)).toFixed(0))}t.calculateSubAlign=function(e,t,n,o,l){var c=e.start1,u=e.end1,f=e.start2,h=e.end2,p=0===t&&0===n,d=0===o&&0===l;if(p&&d)return e;var g=i(c,u,t),b=i(c,u,n),m=i(f,h,o),v=i(f,h,l);if(g===b&&!p)return null;if(m===v&&!d)return null;var _=0===t&&0===n?[m,v]:0===o&&0===l?[g,b]:(0,a.intersection)([g,b],[m,v]);if(0===_.length)return null;var y=r(_,2),x=y[0],j=y[1];return t=s(c,u,x),n=s(c,u,j),o=s(f,h,x),l=s(f,h,j),Object.assign(Object.assign({},e),{start1:t,end1:n,start2:o,end2:l})}},299:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.eachLine=void 0,a(n(78),t),a(n(135),t);var s=n(104);Object.defineProperty(t,"eachLine",{enumerable:!0,get:function(){return i(s).default}})},300:function(e,t,n){"use strict";var r=n(38),a=n(24);Object.defineProperty(t,"__esModule",{value:!0});var i=n(48),s=n(43),o=1e6;function l(e){return e>o?"".concat((e/o).toFixed(2)," Mb"):e>1e3?"".concat((e/1e3).toFixed(2)," Kb"):"".concat(e," bp")}t.default=function(){var e=this,t=e.layout,n=(e.alignmentsByCtgs,[]),o=function(e){var t=0;e.forEach((function(e){var n=0;e.forEach((function(e){n+=Math.abs(e.start-e.end)})),n>t&&(t=n)}));for(var n=1;!(t/n/5<=20);)n*=10;return n}(t);return t.forEach((function(t,c){var u=e.getDrawOptionsItem(c),f=u.chro_axis,h=u.chro_axis_pos;if(f){var p="auto"===u.chro_axis_unit?o:u.chro_axis_unit;console.log("unit",p),t.forEach((function(e){n.push.apply(n,r(function(e,t,n){for(var o=[],c=e.start,u=e.end,f=Math.min(c,u),h=Math.max(c,u),p=f%t===0?f:f-f%t+t,d=function(n,r){var o=[],c=e.getSvgPos(n,r,!0),u=a(c,2),f=u[0],h=u[1],p=e.getSvgPos(n,r,!1),d=(f+a(p,1)[0])/2,g=2;n%(10*t)===0?g=8:n%(5*t)===0&&(g=5);var b={x:d,y1:h,y2:h+("top"===r?-g:g),textX:d,textY:h+("top"===r?-12:12),textAngle:"top"===r?335:25,text:l(n)};return o.push((0,i.renderItem)(s.SVG_AXIS_POINT,b)),n%(5*t)===0&&o.push((0,i.renderItem)(s.SVG_AXIS_TEXT,b)),o};p<h;)"both"!==n&&"bottom"!==n||o.push.apply(o,r(d(p,"bottom"))),"both"!==n&&"top"!==n||o.push.apply(o,r(d(p,"top"))),p+=t;return o}(e,p,h)))}))}})),e.svg_template||(e.svg_template=[]),e.svg_template.push({content:n}),e}},301:function(e,t,n){"use strict";var r=n(24),a=n(34),i=n(38),s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=s(n(56)),l=n(48),c=n(43),u=n(105),f=n(77);function h(e,t){for(var n in t){var r;if(n in e)(r=e[n]).push.apply(r,i(t[n]));else e[n]=t[n]}}function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"HIGHLIGHT",n={};if(!e)return n;for(var a=e.split("\n"),i=0,s=a.length;i<s;i++){var o=a[i];if(!o.startsWith("#")){var l=o.split(/\s+/),c=r(l,4),h=c[0],p=c[1],d=c[2],g=c[3],b=(0,u.parseBases)(p),m=(0,u.parseBases)(d);if(isNaN(b)){var v=(0,f.errorPos)(o,[h,p,d,g],1);throw new Error("".concat(p," cannot be resolved to number of bases! in '").concat(t,"' line ").concat(i+1,":\n").concat(v))}if(isNaN(m)){var _=(0,f.errorPos)(o,[h,p,d,g],1);throw new Error("".concat(d," cannot be resolved to number of bases! in '").concat(t,"' line ").concat(i+1,":\n").concat(_))}h in n||(n[h]=[]),n[h].push({start:b,end:m,color:g||"red"})}}return n}t.default=function(){var e=this,t=e.layout,n=[],i=e.highlight,s=e.highlightContent;if(!i&&!s)return e;var u=i?function(e){var t,n={},r=a(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;h(n,p(o.default.readFileSync(i).toString().trim()))}}catch(s){r.e(s)}finally{r.f()}return n}(i):p(s);return t.forEach((function(t,i){e.getDrawOptionsItem(i);t.forEach((function(t){var i,s=t.ctg,o=t.start,h=t.end,p=Math.max(o,h),d=Math.min(o,h),g=u[s];if(g&&0!==g.length){var b,m=a(g);try{for(m.s();!(b=m.n()).done;){var v=b.value,_=v.start,y=v.end,x=v.color,j=(0,f.intersection)([p,d],[_,y]),O=r(j,2);if((_=O[0])>(y=O[1])){var C=[y,_];_=C[0],y=C[1]}if(_&&y){var w=t.getSvgPos(_,"top",!1),P=r(w,2),N=P[0],S=P[1],A=t.getSvgPos(y,"top",!0),I=r(A,1)[0],M=Math.abs(I-N);M<1&&e.hl_min1px&&(M=1);var E={x:Math.min(N,I),y:S,width:M,height:null===(i=t.svgProps)||void 0===i?void 0:i.height,color:x};n.push((0,l.renderItem)(c.SVG_HIGHLIGHT,E))}}}catch(T){m.e(T)}finally{m.f()}}}))})),e.svg_template||(e.svg_template=[]),e.svg_template.push({content:n}),e}},302:function(e,t,n){"use strict";var r=n(34);Object.defineProperty(t,"__esModule",{value:!0});var a=n(43),i=n(48),s={"00 Mb":1e8,"0 Mb":1e7,Mb:1e6,"00 Kb":1e5,"0 Kb":1e4,Kb:1e3,"00 bp":100,"0 bp":10,bp:1};t.default=function(){var e=this,t=e.scale,n=e.show_scale,o=e.svg_width,l=e.svg_space,c=e.svg_height;if(!n)return e;var u,f=[],h=150*(1/t),p="",d=Object.keys(s).sort((function(e,t){return s[t]-s[e]})),g=r(d);try{for(g.s();!(u=g.n()).done;){var b=u.value,m=s[b];if(h>m){var v=Number((h/m).toFixed(0));h=v*m,p="".concat(v).concat(b);break}}}catch(j){g.e(j)}finally{g.f()}var _=o*(1-l/2)-h*t,y=.9*c;f.push((0,i.renderItem)(a.SVG_SCALE_LINE,{x1:_,y1:y-5,x2:_,y2:y,x3:_+h*t,y3:y,x4:_+h*t,y4:y-5}));var x=e.label_font_size*p.length/2;return f.push((0,i.renderItem)(a.SVG_SCALE_TEXT,{x:_+(h*t-x)/2,y:y-10,fontSize:e.label_font_size,text:p})),e.svg_template||(e.svg_template=[]),e.svg_template.push({content:f}),e}},303:function(e,t,n){"use strict";var r=n(44),a=n(38),i=n(34),s=n(24),o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function s(e){try{l(r.next(e))}catch(t){i(t)}}function o(e){try{l(r.throw(e))}catch(t){i(t)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});var l=n(77),c=n(48),u=n(43),f=["mrna"],h=["exon"],p=["three_prime_UTR","3_UTR"],d=["five_prime_UTR","5_UTR"];function g(e){var t={};e.endsWith(";")||(e+=";");for(var n=!1,r=0,a=0,i=e.length;a<i;a++){var o=e[a];if('"'===o)n=!n;else if(";"===o&&!n){var l=e.slice(r,a).split("="),c=s(l,2),u=c[0],f=c[1];f=f?f.trim().replace(/"/g,""):"",t[u]=f,r=a+1}}return t}function b(e,t){var n={},r={},a=function(e){n[e]={exons:[],UTR3s:[],UTR5s:[],pos:[-1,-1],parent:void 0,strand:"+"}};return(0,l.eachLine)(e,(function(e){if(e.startsWith("#")||""===e.trim())return!0;var i=e.split("\t"),o=s(i,9),l=o[0],c=(o[1],o[2]),u=o[3],b=o[4],m=(o[5],o[6]),v=(o[7],o[8]);if(!t.has(l))return!0;var _=g(v),y=_.ID;if(c=c.toLowerCase(),f.includes(c))n[y]||a(y),n[y].pos=[Number(u),Number(b)],n[y].parent=_.Parent,n[y].strand=m,r[l]||(r[l]=[]),r[l].push(n[y]);else if(h.includes(c)){var x=_.Parent;if(!x)return!0;n[x]||a(y),n[x].exons.push([Number(u),Number(b)])}else if(p.includes(c)){var j=_.Parent;if(!j)return!0;n[j]||a(y),n[j].UTR3s.push([Number(u),Number(b)])}else if(d.includes(c)){var O=_.Parent;if(!O)return!0;n[O]||a(y),n[O].UTR5s.push([Number(u),Number(b)])}return!0})).then((function(){return{mRNAInfoMap:n,ctg2MRNAInfos:r}}))}function m(e,t){var n,r={},a={},o=function(e){r[e]={exons:[],UTR3s:[],UTR5s:[],pos:[-1,-1],parent:void 0,strand:"+"}},l=e.trim().split("\n"),c=i(l);try{for(c.s();!(n=c.n()).done;){var u=n.value;if(!u.startsWith("#")&&""!==u.trim()){var b=u.split("\t"),m=s(b,9),v=m[0],_=(m[1],m[2]),y=m[3],x=m[4],j=(m[5],m[6]),O=(m[7],m[8]);if(t.has(v)){var C=g(O),w=C.ID;if(_=_.toLowerCase(),f.includes(_))r[w]||o(w),r[w].pos=[Number(y),Number(x)],r[w].parent=C.Parent,r[w].strand=j,a[v]||(a[v]=[]),a[v].push(r[w]);else if(h.includes(_)){var P=C.Parent;if(!P)continue;r[P]||o(w),r[P].exons.push([Number(y),Number(x)])}else if(p.includes(_)){var N=C.Parent;if(!N)continue;r[N]||o(w),r[N].UTR3s.push([Number(y),Number(x)])}else if(d.includes(_)){var S=C.Parent;if(!S)continue;r[S]||o(w),r[S].UTR5s.push([Number(y),Number(x)])}}}}}catch(A){c.e(A)}finally{c.f()}return{mRNAInfoMap:r,ctg2MRNAInfos:a}}function v(e,t){for(var n in t){var r;if(n in e)(r=e[n]).push.apply(r,a(t[n]));else e[n]=t[n]}}function _(e){e.sort((function(e,t){return e.pos[0]-t.pos[0]}));for(var t=0,n=0,r=0,a=e.length;r<a;r++){var i=e[r];if(i){var o=s(i.pos,2),c=o[0],u=o[1];0!==(0,l.intersection)([t,n],[c,u]).length?(e.splice(r,1),r--,a--):(t=c,n=u)}}}function y(e,t,n,r){var a,o=[],l=i(e);try{for(l.s();!(a=l.n()).done;){var f=s(a.value,2),h=f[0],p=f[1],d=n.getSvgPos(h,"top"),g=s(d,2),b=g[0],m=g[1],v=n.getSvgPos(p,"top",!0),_=s(v,1)[0],y=Math.min(b,_),x=Math.max(b,_),j=y+.2*(x-y),O=y+.8*(x-y),C=m+.2*n.svgHeight,w=m+.5*n.svgHeight,P=m+.8*n.svgHeight,N={x1:y,y1:C,x2:y,y2:P,x3:O,y3:P,x4:x,y4:w,x5:O,y5:C,className:r},S={x1:y,y1:w,x2:j,y2:P,x3:x,y3:P,x4:x,y4:C,x5:j,y5:C,className:r};o.push((0,c.renderItem)(u.SVG_GENE_EXON,t>0?N:S))}}catch(A){l.e(A)}finally{l.f()}return o}t.default=function(){return o(this,void 0,void 0,r.mark((function e(){var t,n,o,f,h,p,d,g,x,j,O,C,w,P,N,S,A;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=(t=this).layout,o=t.gff,f=t.gffContent,h=[],p={},d={},g=new Set,n.forEach((function(e){e.forEach((function(e){var t=e.ctg;g.add(t)}))})),!o){e.next=32;break}x=i(o),e.prev=9,x.s();case 11:if((j=x.n()).done){e.next=22;break}return O=j.value,e.next=15,b(O,g);case 15:C=e.sent,w=C.mRNAInfoMap,P=C.ctg2MRNAInfos,Object.assign(p,w),v(d,P);case 20:e.next=11;break;case 22:e.next=27;break;case 24:e.prev=24,e.t0=e.catch(9),x.e(e.t0);case 27:return e.prev=27,x.f(),e.finish(27);case 30:e.next=33;break;case 32:f&&(N=m(f,g),S=N.mRNAInfoMap,A=N.ctg2MRNAInfos,Object.assign(p,S),v(d,A));case 33:return n.forEach((function(e){e.forEach((function(e){var t=e.ctg,n=e.start,r=e.end,o=Math.min(n,r),f=Math.max(n,r),p=d[t];if(p){p=p.filter((function(e){var t=s(e.pos,2),n=t[0];return!(t[1]<o||n>f)})),_(p);var g,b=i(p);try{for(b.s();!(g=b.n()).done;){var m=g.value,v=m.exons,x=m.UTR3s,j=m.UTR5s,O=m.strand,C=s(m.pos,2),w=C[0],P=C[1],N=(0,l.complement)([w,P],[].concat(a(v),a(x),a(j))),S=1;"-"===O&&(S*=-1),n<r&&(S*=-1),h.push.apply(h,a(y(v,S,e,"exon"))),h.push.apply(h,a(y(x,S,e,"UTR3"))),h.push.apply(h,a(y(j,S,e,"UTR5")));var A,I=i(N);try{for(I.s();!(A=I.n()).done;){var M=s(A.value,2),E=M[0],T=M[1],L=e.getSvgPos(E,"top"),k=s(L,2),G=k[0],V=k[1],B=e.getSvgPos(T,"top"),R=s(B,1)[0];h.push((0,c.renderItem)(u.SVG_GENE_INTRON,{x1:G,x2:R,y:V+.5*e.svgHeight}))}}catch(D){I.e(D)}finally{I.f()}}}catch(D){b.e(D)}finally{b.f()}}}))})),t.svg_template||(t.svg_template=[]),t.svg_template.push({content:h}),e.abrupt("return",t);case 37:case"end":return e.stop()}}),e,this,[[9,24,27,30]])})))}},304:function(e,t,n){"use strict";var r=n(44),a=n(24),i=n(34),s=n(38),o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),c=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return l(t,e),t},u=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function s(e){try{l(r.next(e))}catch(t){i(t)}}function o(e){try{l(r.throw(e))}catch(t){i(t)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});var f=c(n(77)),h=n(65);function p(e,t){for(var n in t)if(n in e)for(var r in t[n]){var a;if(r in e[n])(a=e[n][r]).push.apply(a,s(t[n][r]));else e[n][r]=t[n][r]}else e[n]=t[n]}t.default=function(){return u(this,void 0,void 0,r.mark((function e(){var t,n,o,l,c,u,d,g,b,m,v,_,y,x,j,O,C,w,P,N,S,A,I,M,E;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=(t=this).inputs,o=t.inputContent,l=t.min_alignment_length,c=t.min_identity,u=t.min_bit_score,d=t.max_evalue,g=t.layout,b={},m=[],v={},!n){e.next=32;break}_=i(n),e.prev=7,_.s();case 9:if((y=_.n()).done){e.next=22;break}return x=y.value,e.next=13,(0,f.default)(x,{minIdentity:c,minAlignmentLength:l,maxEvalue:d,minBitScore:u,filterCtgPairs:[]});case 13:j=e.sent,O=j.alignments,C=j.lenInfo,w=j.alignmentsByCtgs,Object.assign(b,C),m.push.apply(m,s(O)),p(v,w);case 20:e.next=9;break;case 22:e.next=27;break;case 24:e.prev=24,e.t0=e.catch(7),_.e(e.t0);case 27:return e.prev=27,_.f(),e.finish(27);case 30:e.next=33;break;case 32:o&&(P=(0,f.alignParserFromContent)(o,{minIdentity:c,minAlignmentLength:l,maxEvalue:d,minBitScore:u,filterCtgPairs:[]}),N=P.alignments,S=P.lenInfo,A=P.alignmentsByCtgs,Object.assign(b,S),m.push.apply(m,s(N)),p(v,A));case 33:for(t.alignments=m,t.lenInfo=b,t.alignmentsByCtgs=v,I=function(e,n){var r=g[e-1],s=g[e],o=g[e+1];s.forEach((function(e){var n=new Set,s=new Set,l={},c=function(e,t,n){var r=Math.min(t,n),a=Math.max(t,n);l[e]=e in l?{start:Math.min(r,l[e].start),end:Math.max(a,l[e].end)}:{start:r,end:a}};r&&r.forEach((function(r){var i=e.ctg,o=r.ctg,l=t.alignmentsByCtgs;0!==e.start&&0!==e.end||(n.add(e.ctg),s.add(e));var u=i in l&&o in l[i]?l[i][o]:[];if(u&&0!==u.length)for(var h=0,p=u.length;h<p;h++){var d=u[h],g=e.ctg===d.ctg1?e.start:r.start,b=e.ctg===d.ctg1?e.end:r.end,m=e.ctg===d.ctg2?e.start:r.start,v=e.ctg===d.ctg2?e.end:r.end,_=(0,f.calculateSubAlign)(d,g,b,m,v);if(_){var y=_.ctg1,x=_.start1,j=_.end1,O=(_.ctg2,_.start2),C=_.end2,w=e.ctg===y?[x,j]:[O,C],P=a(w,2),N=P[0],S=P[1];c(e.ctg,N,S)}}})),o&&o.forEach((function(r){var i=e.ctg,o=r.ctg,l=t.alignmentsByCtgs;0!==e.start&&0!==e.end||(n.add(e.ctg),s.add(e));var u=i in l&&o in l[i]?l[i][o]:[];if(u&&0!==u.length)for(var h=0,p=u.length;h<p;h++){var d=u[h],g=e.ctg===d.ctg1?e.start:r.start,b=e.ctg===d.ctg1?e.end:r.end,m=e.ctg===d.ctg2?e.start:r.start,v=e.ctg===d.ctg2?e.end:r.end,_=(0,f.calculateSubAlign)(d,g,b,m,v);if(_){var y=_.ctg1,x=_.start1,j=_.end1,O=(_.ctg2,_.start2),C=_.end2,w=e.ctg===y?[x,j]:[O,C],P=a(w,2),N=P[0],S=P[1];c(e.ctg,N,S)}}}));var u,p=i(s);try{for(p.s();!(u=p.n()).done;){var d=u.value,g=d.ctg;l[g]&&(d.start=l[g].start,d.end=l[g].end,(0,h.warn)("".concat(g," lacks start and end information. It automatically calculates that start is ").concat(d.start," and end is ").concat(d.end,".")))}}catch(b){p.e(b)}finally{p.f()}}))},M=0,E=g.length;M<E;M++)I(M);return e.abrupt("return",t);case 39:case"end":return e.stop()}}),e,this,[[7,24,27,30]])})))}},305:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(){var e=this,t=e.karyotype,n=e.karyotypeContent,r=e.layout,a=e.alignmentsByCtgs,i={},s=function(e,t,n){var r=Math.min(t,n),a=Math.max(t,n);i[e]=e in i?{start:Math.min(r,i[e].start),end:Math.max(a,i[e].end)}:{start:r,end:a}};if(0===r.length&&!t&&!n){for(var o=Object.keys(a),l=0,c=o;l<c.length;l++){var u=c[l];for(var f in a[u]){a[u][f].forEach((function(e){var t=e.ctg1,n=e.start1,r=e.end1,a=e.ctg2,i=e.start2,o=e.end2;s(t,n,r),s(a,i,o)}))}}o.sort((function(e,t){var n=i[e].end-i[e].start;return i[t].end-i[t].start-n}));var h=function(e){return{ctg:e,start:i[e].start,end:i[e].end}};0===o.length||(1===o.length?r.push([h(o[0])]):2===o.length?r.push([h(o[1])],[h(o[0])]):3===o.length?r.push([h(o[1])],[h(o[2])],[h(o[0])]):4===o.length?r.push([h(o[1]),h(o[2])],[h(o[3]),h(o[0])]):r.push([h(o[2]),h(o[3])],[h(o[0])],[h(o[4]),h(o[1])]))}return e}},306:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},307:function(e,t,n){"use strict";var r=n(44),a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function s(e){try{l(r.next(e))}catch(t){i(t)}}function o(e){try{l(r.throw(e))}catch(t){i(t)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});var i=n(123);t.default=function(e){return a(this,void 0,void 0,r.mark((function t(){return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.use(i.paramsCreater),e.use(i.layoutCreater),t.next=4,e.use(i.alignCreater);case 4:return e.use(i.autoLayoutCreater),t.next=7,e.use(i.svgCreater);case 7:return t.abrupt("return",e.svg);case 8:case"end":return t.stop()}}),t)})))}},309:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(39),s=n.n(i),o=(n(152),n(153),n(142)),l=(n(155),n(144)),c=(n(157),n(106)),u=(n(308),n(143)),f=n(44),h=n.n(f),p=n(69),d=n(137),g=n(47),b=(n(166),n(97),n(36)),m=(n(167),n(32)),v=(n(169),n(63)),_=(n(171),n(17)),y=(n(173),n(108)),x=(n(175),n(107)),j=(n(310),n(62)),O=n(145),C=n(313),w=(n(179),{inputContent:"",min_alignment_length:0,max_evalue:1e-5,min_identity:0,min_bit_score:1e3,chro_thickness:15,no_label:!1,label_angle:30,label_font_size:30,label_pos:"right",label_x_offset:0,label_y_offset:0,gap_length:.2,svg_height:800,svg_width:1200,svg_space:.2,svg_content_width:960,show_scale:!1,scale:0,chro_axis_pos:"bottom",chro_axis_unit:"auto",align:"center",hl_min1px:!1,highlightContent:"",karyotypeContent:"",parameterContent:"",gffContent:"",use:function(e){return e.apply(this)},style:"classic"}),P=n(138),N=n.n(P),S=n(6),A=j.a.Option,I=x.a.TextArea,M=y.a.Panel,E=function(e){var t=e.onSubmit,n=_.a.useForm(),a=Object(g.a)(n,1)[0],i=Object(r.useState)(!1),s=Object(g.a)(i,2),o=s[0],l=s[1],c=Object(r.useState)(!1),u=Object(g.a)(c,2),f=u[0],h=u[1],d=Object(r.useState)(!1),P=Object(g.a)(d,2),E=P[0],T=P[1],L=Object(r.useState)(!1),k=Object(g.a)(L,2),G=k[0],V=k[1],B=N.a.parse(window.location.href.slice(window.location.href.indexOf("?")+1),{parseBooleans:!0,parseNumbers:!0});Object.assign(w,B),console.log("urlOptions",B),Object(r.useEffect)((function(){"autoSubmit"in B&&a.submit()}),[]);return Object(S.jsxs)(_.a,{form:a,name:"dynamic_form_nest_item",onFinish:function(e){var n=e.svg_width?e.svg_width:w.svg_width,r=e.svg_space?e.svg_space:w.svg_space;t(Object(p.a)(Object(p.a)({},e),{},{karyotypeContent:e.karyotypeContent?e.karyotypeContent.karyotypeContent:"",highlightContent:e.highlightContent?e.highlightContent.highlightContent:"",gffContent:e.gffContent?e.gffContent.gffContent:"",parameterContent:e.parameterContent?e.parameterContent.parameterContent:"",svg_content_width:n*(1-r)}))},autoComplete:"off",size:"large",children:[Object(S.jsx)("label",{children:"alignments"}),Object(S.jsx)(_.a.Item,{name:"inputContent",label:"",initialValue:w.inputContent,children:Object(S.jsx)(I,{rows:10,wrap:"off",className:"file-input",allowClear:!0,onBlur:function(){return a.submit()}})}),Object(S.jsxs)(y.a,{ghost:!0,style:{marginBottom:20},children:[Object(S.jsxs)(M,{header:"Normal options:",children:[Object(S.jsx)(_.a.Item,{name:"hl_min1px",label:"hl_min1px",valuePropName:"checked",labelCol:{span:9},wrapperCol:{span:6,offset:6},initialValue:w.hl_min1px,children:Object(S.jsx)(v.a,{defaultChecked:!1,onChange:function(){a.submit()}})}),Object(S.jsx)(_.a.Item,{name:"show_scale",label:"show_scale",valuePropName:"checked",labelCol:{span:9},wrapperCol:{span:6,offset:6},initialValue:w.show_scale,children:Object(S.jsx)(v.a,{defaultChecked:!1,onChange:function(){a.submit()}})}),Object(S.jsx)(_.a.Item,{name:"scale",label:"scale",labelCol:{span:9},wrapperCol:{span:6,offset:6},initialValue:w.scale||"",children:Object(S.jsx)(m.a,{min:0,controls:!1,addonAfter:"bp/px",onBlur:function(){a.submit()},style:{width:"100%"}})})]},"1"),Object(S.jsxs)(M,{header:"Filter options",children:[Object(S.jsx)(_.a.Item,{name:"min_alignment_length",label:"min_alignment_length",labelCol:{span:9},wrapperCol:{span:6,offset:6},initialValue:w.min_alignment_length,children:Object(S.jsx)(m.a,{min:0,controls:!1,addonAfter:"bp",onBlur:function(){a.submit()},style:{width:"100%"}})}),Object(S.jsx)(_.a.Item,{name:"min_identity",label:"min_identity",labelCol:{span:9},wrapperCol:{span:6,offset:6},initialValue:w.min_identity,children:Object(S.jsx)(m.a,{min:0,controls:!1,addonAfter:"%",onBlur:function(){a.submit()},style:{width:"100%"}})}),Object(S.jsx)(_.a.Item,{name:"min_bit_score",label:"min_bit_score",labelCol:{span:9},wrapperCol:{span:6,offset:6},initialValue:w.min_bit_score,children:Object(S.jsx)(m.a,{min:0,controls:!1,addonAfter:"",onBlur:function(){a.submit()},style:{width:"100%"}})}),Object(S.jsx)(_.a.Item,{name:"max_evalue",label:"max_evalue",labelCol:{span:9},wrapperCol:{span:6,offset:6},initialValue:w.max_evalue,children:Object(S.jsx)(m.a,{min:0,max:1,controls:!1,addonAfter:"",onBlur:function(){a.submit()},style:{width:"100%"}})})]},"2"),Object(S.jsxs)(M,{header:"Drawing options",children:[Object(S.jsx)(_.a.Item,{name:"chro_thickness",label:"chro_thickness",labelCol:{span:9},wrapperCol:{span:6,offset:6},initialValue:w.chro_thickness,children:Object(S.jsx)(m.a,{min:0,controls:!1,addonAfter:"px",onBlur:function(){a.submit()},style:{width:"100%"}})}),Object(S.jsx)(_.a.Item,{name:"no_label",label:"no_label",valuePropName:"checked",labelCol:{span:9},wrapperCol:{span:6,offset:6},initialValue:w.no_label,children:Object(S.jsx)(v.a,{defaultChecked:!1,onChange:function(){a.submit()}})}),Object(S.jsx)(_.a.Item,{name:"label_font_size",label:"label_font_size",labelCol:{span:9},wrapperCol:{span:6,offset:6},initialValue:w.label_font_size,children:Object(S.jsx)(m.a,{min:0,controls:!1,addonAfter:"px",onBlur:function(){a.submit()},style:{width:"100%"}})}),Object(S.jsx)(_.a.Item,{name:"label_angle",label:"label_angle",labelCol:{span:9},wrapperCol:{span:6,offset:6},initialValue:w.label_angle,children:Object(S.jsx)(m.a,{min:0,controls:!1,addonAfter:"px",onBlur:function(){a.submit()},style:{width:"100%"}})}),Object(S.jsx)(_.a.Item,{name:"label_pos",label:"label_pos",labelCol:{span:9},wrapperCol:{span:6,offset:6},initialValue:w.label_pos,children:Object(S.jsxs)(j.a,{onChange:function(){a.submit()},children:[Object(S.jsx)(A,{value:"left",children:"left"}),Object(S.jsx)(A,{value:"center",children:"center"}),Object(S.jsx)(A,{value:"right",children:"right"})]})}),Object(S.jsx)(_.a.Item,{name:"label_x_offset",label:"label_x_offset",labelCol:{span:9},wrapperCol:{span:6,offset:6},initialValue:w.label_x_offset,children:Object(S.jsx)(m.a,{min:0,controls:!1,addonAfter:"px",onBlur:function(){a.submit()},style:{width:"100%"}})}),Object(S.jsx)(_.a.Item,{name:"label_y_offset",label:"label_y_offset",labelCol:{span:9},wrapperCol:{span:6,offset:6},initialValue:w.label_y_offset,children:Object(S.jsx)(m.a,{min:0,controls:!1,addonAfter:"px",onBlur:function(){a.submit()},style:{width:"100%"}})}),Object(S.jsx)(_.a.Item,{name:"chro_axis",label:"chro_axis",valuePropName:"checked",labelCol:{span:9},wrapperCol:{span:6,offset:6},initialValue:w.chro_axis,children:Object(S.jsx)(v.a,{defaultChecked:!1,onChange:function(){a.submit()}})}),Object(S.jsx)(_.a.Item,{name:"chro_axis_unit",label:"chro_axis_unit",labelCol:{span:9},wrapperCol:{span:6,offset:6},initialValue:w.chro_axis_unit,children:Object(S.jsx)(x.a,{onBlur:function(e){a.submit()},style:{width:"100%"}})}),Object(S.jsx)(_.a.Item,{name:"chro_axis_pos",label:"chro_axis_pos",labelCol:{span:9},wrapperCol:{span:6,offset:6},initialValue:w.chro_axis_pos,children:Object(S.jsxs)(j.a,{onChange:function(){a.submit()},children:[Object(S.jsx)(A,{value:"top",children:"top"}),Object(S.jsx)(A,{value:"bottom",children:"bottom"}),Object(S.jsx)(A,{value:"both",children:"both"})]})}),Object(S.jsx)(_.a.Item,{name:"gap_length",label:"gap_length",labelCol:{span:9},wrapperCol:{span:6,offset:6},initialValue:w.gap_length,children:Object(S.jsx)(m.a,{min:0,controls:!1,addonAfter:"",onBlur:function(){a.submit()},style:{width:"100%"}})}),Object(S.jsx)(_.a.Item,{name:"align",label:"align",labelCol:{span:9},wrapperCol:{span:6,offset:6},initialValue:w.align,children:Object(S.jsxs)(j.a,{onChange:function(){a.submit()},children:[Object(S.jsx)(A,{value:"left",children:"left"}),Object(S.jsx)(A,{value:"center",children:"center"}),Object(S.jsx)(A,{value:"right",children:"right"})]})})]},"3"),Object(S.jsxs)(M,{header:"Style options",children:[Object(S.jsx)(_.a.Item,{name:"bezier",label:"bezier",valuePropName:"checked",labelCol:{span:9},wrapperCol:{span:6,offset:6},initialValue:w.bezier,children:Object(S.jsx)(v.a,{defaultChecked:!1,onChange:function(){a.submit()}})}),Object(S.jsx)(_.a.Item,{name:"style",label:"style",labelCol:{span:9},wrapperCol:{span:6,offset:6},initialValue:w.style,children:Object(S.jsxs)(j.a,{onChange:function(){a.submit()},children:[Object(S.jsx)(A,{value:"classic",children:"classic"}),Object(S.jsx)(A,{value:"simple",children:"simple"})]})})]},"4"),Object(S.jsxs)(M,{header:"Svg options",children:[Object(S.jsx)(_.a.Item,{name:"svg_height",label:"svg_height",labelCol:{span:9},wrapperCol:{span:6,offset:6},initialValue:w.svg_height,children:Object(S.jsx)(m.a,{min:0,controls:!1,addonAfter:"",onBlur:function(){a.submit()},style:{width:"100%"}})}),Object(S.jsx)(_.a.Item,{name:"svg_width",label:"svg_width",labelCol:{span:9},wrapperCol:{span:6,offset:6},initialValue:w.svg_width,children:Object(S.jsx)(m.a,{min:0,controls:!1,addonAfter:"",onBlur:function(){a.submit()},style:{width:"100%"}})}),Object(S.jsx)(_.a.Item,{name:"svg_space",label:"svg_space",labelCol:{span:9},wrapperCol:{span:6,offset:6},initialValue:w.svg_space,children:Object(S.jsx)(m.a,{min:0,controls:!1,addonAfter:"",onBlur:function(){a.submit()},style:{width:"100%"}})})]},"5")]}),Object(S.jsx)(_.a.List,{name:"karyotypeContent",children:function(e,t){var n=t.add,r=t.remove;return Object(S.jsxs)(S.Fragment,{children:[e.map((function(e){return Object(S.jsxs)("div",{children:[Object(S.jsx)(O.a,{onClick:function(){l(!1),r(e.name),a.submit()},className:"clear-btn"}),Object(S.jsx)("label",{style:{marginLeft:10},children:"karyotype"}),Object(S.jsx)(_.a.Item,{name:"karyotypeContent",label:"",initialValue:w.karyotypeContent,children:Object(S.jsx)(I,{rows:10,wrap:"off",className:"file-input",size:"large",allowClear:!0,onBlur:function(){return a.submit()}})})]},"karyotypeContent")})),o?null:Object(S.jsx)(_.a.Item,{children:Object(S.jsx)(b.a,{type:"dashed",onClick:function(){l(!0),n()},block:!0,icon:Object(S.jsx)(C.a,{}),children:"Add karyotype"})})]})}}),Object(S.jsx)(_.a.List,{name:"highlightContent",children:function(e,t){var n=t.add,r=t.remove;return Object(S.jsxs)(S.Fragment,{children:[e.map((function(e){return Object(S.jsxs)("div",{children:[Object(S.jsx)(O.a,{onClick:function(){h(!1),r(e.name),a.submit()},className:"clear-btn"}),Object(S.jsx)("label",{style:{marginLeft:10},children:"Highlights"}),Object(S.jsx)(_.a.Item,{name:"highlightContent",label:"",initialValue:w.highlightContent,children:Object(S.jsx)(I,{rows:10,wrap:"off",className:"file-input",size:"large",allowClear:!0,onBlur:function(){return a.submit()}})})]},"highlightContent")})),f?null:Object(S.jsx)(_.a.Item,{children:Object(S.jsx)(b.a,{type:"dashed",onClick:function(){h(!0),n()},block:!0,icon:Object(S.jsx)(C.a,{}),children:"Add highlights"})})]})}}),Object(S.jsx)(_.a.List,{name:"parameterContent",children:function(e,t){var n=t.add,r=t.remove;return Object(S.jsxs)(S.Fragment,{children:[e.map((function(e){return Object(S.jsxs)("div",{children:[Object(S.jsx)(O.a,{onClick:function(){T(!1),r(e.name),a.submit()},className:"clear-btn"}),Object(S.jsx)("label",{style:{marginLeft:10},children:"parameter"}),Object(S.jsx)(_.a.Item,{name:"parameterContent",label:"",initialValue:w.parameterContent,children:Object(S.jsx)(I,{rows:10,wrap:"off",className:"file-input",size:"large",allowClear:!0,onBlur:function(){return a.submit()}})})]},"parameterContent")})),E?null:Object(S.jsx)(_.a.Item,{children:Object(S.jsx)(b.a,{type:"dashed",onClick:function(){T(!0),n()},block:!0,icon:Object(S.jsx)(C.a,{}),children:"Add parameters"})})]})}}),Object(S.jsx)(_.a.List,{name:"gffContent",children:function(e,t){var n=t.add,r=t.remove;return Object(S.jsxs)(S.Fragment,{children:[e.map((function(e){return Object(S.jsxs)("div",{children:[Object(S.jsx)(O.a,{onClick:function(){V(!1),r(e.name),a.submit()},className:"clear-btn"}),Object(S.jsx)("label",{style:{marginLeft:10},children:"gff"}),Object(S.jsx)(_.a.Item,{name:"gffContent",label:"",initialValue:w.gffContent,children:Object(S.jsx)(I,{rows:10,wrap:"off",className:"file-input",size:"large",allowClear:!0,onBlur:function(){return a.submit()}})})]},"gffContent")})),G?null:Object(S.jsx)(_.a.Item,{children:Object(S.jsx)(b.a,{type:"dashed",onClick:function(){V(!0),n()},block:!0,icon:Object(S.jsx)(C.a,{}),children:"Add gff"})})]})}}),Object(S.jsx)(_.a.Item,{children:Object(S.jsx)(b.a,{type:"primary",htmlType:"submit",style:{width:"100%"},children:"Submit"})})]})},T=n(314),L=n(315),k=n(141);var G=function(){var e=Object(r.useState)(""),t=Object(g.a)(e,2),n=t[0],a=t[1],i=Object(r.useState)(""),s=Object(g.a)(i,2),f=s[0],b=s[1],m=function(){var e=Object(d.a)(h.a.mark((function e(t){var n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(p.a)({},w),Object.assign(n,t),console.log("options",n),e.prev=3,e.next=6,Object(k.main)(n);case 6:if(e.t0=e.sent,e.t0){e.next=9;break}e.t0="";case 9:r=e.t0,console.log("optionsAfter",JSON.stringify(n)),console.log(r),a(r),b(""),e.next=21;break;case 16:e.prev=16,e.t1=e.catch(3),console.log(e.t1.message),a(""),b(e.t1.message);case 21:case"end":return e.stop()}}),e,null,[[3,16]])})));return function(t){return e.apply(this,arguments)}}();return Object(S.jsxs)("div",{className:"App",children:[Object(S.jsx)(u.a,{className:"head",title:"LINKVIEW2",subTitle:"A simple visualization tool for DNA sequence alignments.",extra:[Object(S.jsx)("a",{href:"https://github.com/YangJianshun/LINKVIEW2",className:"github-icon",children:Object(S.jsx)(T.a,{})},"github")],children:Object(S.jsx)("p",{className:"supplement",children:"This pure front-end page is the graphical interface of LINKVIEW2 and has almost all the functions of the LINKVIEW2 command line tool."})}),Object(S.jsxs)(o.a,{className:"main-container",children:[Object(S.jsx)(c.a,{span:10,offset:1,children:Object(S.jsx)(E,{onSubmit:m})}),Object(S.jsx)(c.a,{span:10,offset:1,children:Object(S.jsxs)("div",{className:"display-container",children:[f?Object(S.jsx)(l.a,{message:"LINKVIEW2 Error",description:Object(S.jsx)("code",{style:{whiteSpace:"pre-wrap"},children:f}),type:"error",closable:!0,className:"error"}):Object(S.jsx)("a",{href:"data:text/plain;charset=utf-8,".concat(n.replaceAll("#","%23")),download:"linkview.svg",className:"download",children:Object(S.jsx)(L.a,{})}),Object(S.jsx)("div",{className:"svg-container",dangerouslySetInnerHTML:{__html:n}})]},"svg")})]})]})};s.a.render(Object(S.jsx)(a.a.StrictMode,{children:Object(S.jsx)(G,{})}),document.getElementById("root"))},43:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.styles=t.SVG_CLIPPATH_END=t.SVG_CLIPPATH_START=t.SVG_GENE_INTRON=t.SVG_GENE_EXON=t.SVG_SCALE_TEXT=t.SVG_SCALE_LINE=t.SVG_HIGHLIGHT=t.SVG_AXIS_TEXT=t.SVG_AXIS_POINT=t.SVG_ALIGN_BEZIER=t.SVG_ALIGN=t.SVG_LABEL=t.SVG_CTG_DASH=t.SVG_CTG=t.SVG_END=t.SVG_START=void 0,t.SVG_START='<svg width="{svg_width}" height="{svg_height}" xmlns="http://www.w3.org/2000/svg" version="1.1">',t.SVG_END="</svg>",t.SVG_CTG='<rect x="{x}" y="{y}" width="{width}" height="{height}" fill="grey" class="chro"/>',t.SVG_CTG_DASH='<line x1="{x1}" y1="{y}" x2="{x2}" y2="{y}" class="line"/>',t.SVG_LABEL='<text x="{x}" y="{y}" fill="black" font-size="{label_font_size}" transform="rotate({label_angle},{x} {y})" class="label">{ctg}</text>',t.SVG_ALIGN='<path d="M{x1},{y1} L{x2},{y2} L{x3},{y3} L{x4},{y4} Z" {selfStyle} class="align"/>',t.SVG_ALIGN_BEZIER='<path d="M{x1},{y1} C{bezierX1},{bezierY1} {bezierX2},{bezierY2} {x2},{y2} L{x3},{y3} C{bezierX3},{bezierY3} {bezierX4},{bezierY4} {x4},{y4} Z" {selfStyle} class="align"/>',t.SVG_AXIS_POINT='<path d="M {x} {y1} L {x} {y2} " stroke="black" fill="none"/>',t.SVG_AXIS_TEXT='<text x="{textX}" y="{textY}" fill="black" transform="rotate({textAngle},{textX} {textY})" font-size="9">{text}</text>',t.SVG_HIGHLIGHT='<rect x="{x}" y="{y}" width="{width}" height="{height}" fill="{color}" />',t.SVG_SCALE_LINE='<polyline points="{x1},{y1} {x2},{y2} {x3},{y3} {x4},{y4}" fill="none" stroke="black" class="scale"/>',t.SVG_SCALE_TEXT='<text x="{x}" y="{y}" fill="black"  font-size="{fontSize}" class="scale-text">{text}</text>',t.SVG_GENE_EXON='<path d="M{x1},{y1} L{x2},{y2} L{x3},{y3} L{x4},{y4} L{x5},{y5} Z" clip-path="url(#clipPathCtg)" class="{className}"/>',t.SVG_GENE_INTRON='<line x1="{x1}" y1="{y}" x2="{x2}" y2="{y}" clip-path="url(#clipPathCtg)" class="intron"/>',t.SVG_CLIPPATH_START='<defs><clipPath id="clipPathCtg">',t.SVG_CLIPPATH_END="</clipPath></defs>",t.styles={classic:"<defs><style>\n    .chro{\n        fill: rgb(131, 139, 131);      \n    }\n    .align {\n        fill: rgb(96, 123, 139);\n        opacity: 0.5;\n    }\n    .line {\n        stroke: rgb(0, 0, 0);\n        stroke-width: 3.5px;\n    }\n    .exon {\n        fill: rgb(54, 100, 139);\n    }\n    .UTR3 {\n        fill: rgb(47, 79, 79);\n    }\n    .UTR5 {\n        fill: rgb(47, 79, 79);\n    }\n    .intron {\n        stroke: rgb(54, 100, 139);\n        stroke-width: 1.5px;\n    }        \n  </style></defs>".replace(/\s+/g,""),simple:"<defs><style>\n    .chro{\n        stroke: rgb(0, 0, 0);\n        fill: none;\n    }\n    .align {\n        fill: rgb(183, 183, 183);\n        opacity: 0.5;\n    }\n    .line {\n        stroke: rgb(0, 0, 0);\n        stroke-width: 3.5px;\n    }\n    .exon {\n        fill: rgb(81, 81, 81);\n    }\n    .UTR3 {\n        fill: rgb(47, 79, 79);\n    }\n    .UTR5 {\n        fill: rgb(47, 79, 79);\n    }\n    .intron {\n        stroke: rgb(81, 81, 81);\n        stroke-width: 1.5px;\n    }        \n  </style></defs>".replace(/\s+/g,"")}},48:function(e,t,n){"use strict";var r=n(38),a=n(34);function i(e,t){var n,r,i=e,s=e.split("{"),o=a(s);try{for(o.s();!(r=o.n()).done;){var l=r.value,c=l.indexOf("}");if(!(c<0)){var u=l.slice(0,c);i=i.replace("{".concat(u,"}"),null!==(n=t[u])&&void 0!==n?n:"")}}}catch(f){o.e(f)}finally{o.f()}return i}Object.defineProperty(t,"__esModule",{value:!0}),t.renderItem=void 0,t.renderItem=i,t.default=function(e,t){var n,s=[],o=a(e);try{for(o.s();!(n=o.n()).done;){var l=n.value;if("string"===typeof l)s.push(i(l,t));else{var c=l.content;"string"===typeof c?s.push(c):s.push.apply(s,r(c))}}}catch(u){o.e(u)}finally{o.f()}return s.join("\n")}},65:function(e,t,n){"use strict";var r=n(44),a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function s(e){try{l(r.next(e))}catch(t){i(t)}}function o(e){try{l(r.throw(e))}catch(t){i(t)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}l((r=r.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.warn=t.errorPos=t.withErrorConsole=void 0;var s=i(n(260));t.withErrorConsole=function(e){return function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return a(this,void 0,void 0,r.mark((function t(){return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.apply(void 0,n);case 3:t.next=9;break;case 5:t.prev=5,t.t0=t.catch(0),t.t0 instanceof Error&&(t.t0=t.t0.message.replace(/^Error: /,"")),console.log("error: ".concat(t.t0));case 9:case"end":return t.stop()}}),t,null,[[0,5]])})))}},t.errorPos=function(e,t,n){var r=0,a=e;n&&(r=e.indexOf(n),a=n);var i=a.indexOf(t)+r,o=t.length,l="".concat(s.default.bgYellow("|")," ");return e=e.slice(0,i)+s.default.bgYellow.red(t)+e.slice(i+o),"".concat(l).concat(e,"\n").concat(l).concat(" ".repeat(i)).concat(s.default.yellow("^"))},t.warn=function(e){console.log("warn: ".concat(e))}},66:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AlignType=void 0,function(e){e.UNKNOWN="0",e.STANDARD="1",e.BLAST="2",e.MINIMAP="3",e.NUCMER="4",e.NUCMER_T="5",e.NUCMER_B="6"}(t.AlignType||(t.AlignType={}))},77:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.alignParserFromContent=void 0;var s=i(n(127));a(n(294),t),a(n(298),t),a(n(133),t),a(n(299),t);var o=n(127);Object.defineProperty(t,"alignParserFromContent",{enumerable:!0,get:function(){return o.alignParserFromContent}}),t.default=s.default},78:function(e,t,n){"use strict";(function(e){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.warn=t.errorPos=t.withErrorConsole=void 0;var a=r(n(285));t.withErrorConsole=function(t){return function(){try{return t.apply(void 0,arguments)}catch(n){n instanceof Error&&(n=n.message.replace(/^Error: /,"")),console.log("error: ".concat(n)),e.exit()}}},t.errorPos=function(e,t,n){for(var r=t[n=Number(n)],i=0,s=-1,o=0,l=t.length;o<l;o++)if(o!==n&&t[o]===r&&(i=e.indexOf(r,i)+1),o===n){s=e.indexOf(r,i);break}var c=r.length,u="".concat(a.default.bgYellow("|")," ");return e=e.slice(0,s)+a.default.bgYellow.red(r)+e.slice(s+c),"".concat(u).concat(e,"\n").concat(u).concat(" ".repeat(s)).concat(a.default.yellow("^"))},t.warn=function(e){console.log("warn: ".concat(e))}}).call(this,n(103))}},[[309,1,2]]]);
//# sourceMappingURL=main.b7bf70cb.chunk.js.map